<html>
<head>
    <title>FormView Example</title>

    <link rel="stylesheet" type="text/css" href="style.css">

    <script type="text/javascript" src="../components/jquery/jquery.js"></script>
    <script type="text/javascript" src="../components/underscore/underscore.js"></script>
    <script type="text/javascript" src="../components/backbone/backbone.js"></script>
    <script type="text/javascript" src="../components/backbone.marionette/lib/backbone.marionette.js"></script>
    <script type="text/javascript" src="../src/marionette.formview.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            var userModel = Backbone.Model.extend({
                        defaults : {
                            fname : 'Default First Name'
                        },
                        fields   : {
                            fname : {
                                el          : ".fname",
                                validations : {
                                    fname    : "fname Must Be Blah...",
                                    "min:10" : "Minimum Of 10 Characters",
                                    "max:20" : "Maximum Of 20 Characters",
                                    "alphanum" : "AlphaNumeric Characters Only"
                                },
                                validateOn  : 'blur'
                            },
                            lname : {
                                el          : ".lname",
                                validations : {
                                    "min:2" : "Minimum Of 2 Characters",
                                    "max:20" : "Maximum Of 20 Characters",
                                    "alpha"  : "Alpha Characters Only"
                                }
                            },
                            about : {
                                el          : ".about"
                            }
                        },
                        rules    : {
                            fname : function (val) {
                                return true;
                            }
                        }
                    }),

                    UserForm = new Backbone.Marionette.FormView({

                        template : "#form-template",

                        model : new userModel,

                        onSubmit : function () {
                            console.log("ON SUBMIT CALLBACK");
                            $('.msg').removeClass('error')
                                    .addClass('success')
                                    .text("Success")
                                    .fadeIn();
                        },

                        onSubmitError : function (errors) {
                            console.log("ON SUBMITERROR CALLBACK");
                            $('.msg').removeClass('success')
                                    .addClass('error')
                                    .text('error')
                                    .fadeIn();

                            console.log(errors);
                        },

                        onFieldError : function(fieldName, domEl, errors) {
                            console.log("FIELD ERROR");
                            console.log(arguments);
                        }
                    });
            var app = new Backbone.Marionette.Application();
            app.addRegions({ body : "body"});
            app.body.show(UserForm);
        });
    </script>

</head>

<body>
<script id="form-template" type="text/template">
    <form id='form'>
        <h2>Marionette.FormView Example</h2>
        <div class='msg'></div>
        <input type='text' class='fname' placeholder='First Name'/>
        <input type='text' class='lname' placeholder='Last Name'/>
        <textarea class='about' placeholder='A Little Bit About Yourself...'></textarea>
        <input type='submit' value='Submit'/>
    </form>
</script>
</body>
</html>
